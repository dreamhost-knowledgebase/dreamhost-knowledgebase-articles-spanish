<h2 id="h_01HF4QXQYP0KBR64NQBQQ0VMM0">Generalidades</h2>
<div class="solvvy-solution">
<p>Este artículo explica cómo crear una llamada para acceder a la API de DreamHost. Puedes usar la API de DreamHost de dos formas:</p>
<ul>
<li>Visitando la URL en tu buscador</li>
<li>Escribiendo un script</li>
</ul>
</div>
<h2 class="header-section" id="h_01HF4QXQYQZAWAH4C6FF3Q5JS6">Conectar con la API</h2>
<div class="solvvy-solution">
<p><span style="font-size: 15px;">Una llamada a la API se construye con varios valores. Los siguientes pasos te guían a través de la creación de una llamada a la API con estos valores.</span></p>
<div class="steps-section--container">
<div class="steps-section--border"> </div>
<div class="steps-section--content">
<div class="steps-section--step">
<img class="steps-number-icon" src="https://dreamhostknowledgebase.com/graphics/number-1.svg" width="50px">
<h2 id="h_01HF4QXQYQWT9E8TYVQG8ZE6C0">Paso 1 — La URL de base</h2>
<p>La URL de base es la misma para todas las llamadas de API. Esta es:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="code-highlight">https://api.dreamhost.com</span></pre>
</div>
<p>Todo lo que agregues después de esta URL crea su propia llamada API única.</p>
</div>
<div class="steps-section--step">
<img class="steps-number-icon" src="https://dreamhostknowledgebase.com/graphics/number-2.svg" width="50px">
<h2 id="h_01HF4QXQYQBWTFX02QJBC6QNBG">Paso 2 — Generar una llave de API</h2>
<p>Primero debes crear una llave API. Esta es una llave única asociada con tu cuenta y la información que deseas poner a disposición de cualquier llamada de API.</p>
<ol>
<li>Visita la <a class="panel-link" href="https://panel.dreamhost.com/?tree=home.api" rel="noopener noreferrer" target="_blank">página de API</a> en tu panel.
<dl>
<dd><em>Esta página muestra todas las funciones de API disponibles. Solo las funciones que marques estarán disponibles para ti al usar la clave.</em></dd>
</dl>
</li>
<li>Selecciona <span class="text-object">¡Todas las funciones!</span> en la parte superior si deseas tener todos los servicios disponibles.</li>
<li>Da clic a <strong>Generate a new API Key now!</strong> al fondo para crear tu llave.</li>
</ol>
<p>Se muestra tu nueva clave. Ahora puedes usar esta clave para conectarte con la API de DreamHost.</p>
<div class="notebox-important">
<p>Para que una sub-cuenta pueda crear una clave API, se debe otorgar <a href="https://help.dreamhost.com/hc/es/articles/215413677-Generalidades-de-Privilegios-de-Cuenta">Privilegios de Cuenta de Facturación</a>.</p>
<p>Por favor ten en cuenta que si una sub-cuenta crea una clave API, solo será visible para la sub-cuenta en la página <a class="panel-link" href="https://panel.dreamhost.com/?tree=home.api" rel="noopener noreferrer" target="_blank">API Key</a> en el panel. El propietario de la cuenta principal no podrá ver la clave API de la sub-cuenta en su panel.</p>
</div>
<p>Después de la URL de base, agrega <span class="code">?key=</span> seguido de la llave. Asumiendo que tu Llave de API es <span class="text-object">1A2B3C4D5E6F7G8H</span>, la primera parte de tu llamada de API se vea así:</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/<span class="code-highlight">?key=1A2B3C4D5E6F7G8H</span></pre>
</div>
</div>
<div class="steps-section--step">
<img class="steps-number-icon" src="https://dreamhostknowledgebase.com/graphics/number-3.svg" width="50px">
<h2 id="h_01HF4QXQYQSMFKPKJ28SJXEB7B">Paso 3 — Agregar el Comando</h2>
<p>La Llave de API va seguida del comando de API específico que te gustaría correr. Cuando creaste tu clave, elegiste a qué comando(s) puedes acceder. Puedes encontrar los diferentes comandos en las distintas páginas de la API.</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/es/articles/217077998-Comandos-API-de-Listas-de-Anuncios">Comandos API de Listas de Anuncios </a></li>
<li><a href="https://help.dreamhost.com/hc/es/articles/217555677-Metacomandos-de-API">API metacommands</a></li>
<li><a href="https://help.dreamhost.com/hc/es/articles/217555707-Comandos-de-DNS-de-API">Comandos de DNS de API s</a></li>
</ul>
<div class="notebox-note">
<p>En este ejemplo, el comando para <a href="https://help.dreamhost.com/hc/es/articles/217555707-Comandos-de-DNS-de-API" target="_self">enumerar todos los registros DNS en la cuenta</a> es usado.</p>
<p>El comando es <span class="code">dns-list_records</span>.</p>
</div>
<p>Después de la Llave API, agrega <span class="code">&amp;cmd=</span> seguido del comando</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/?key=1A2B3C4D5E6F7G8H<span class="code-highlight">&amp;cmd=dns-list_records</span></pre>
</div>
<p>Este simple comando es todo lo que necesitas para interactuar con la API. Si visitas la URL anterior en un navegador, verás una respuesta.</p>
<p>Hay comandos adicionales que puedes agregar para administrar y formatear la respuesta.</p>
</div>
<div class="steps-section--step">
<img class="steps-number-icon" src="https://dreamhostknowledgebase.com/graphics/number-4.svg" width="50px">
<h2 id="h_01HF4QXQYQH1B2VM4H9A4ZYHK6">Paso 4 — Agregar valores</h2>
<div class="notebox-important">
<p>No todas las llamadas de API requieren valores específicos. Revisa la <a href="https://help.dreamhost.com/hc/es/sections/203903178-Temas-Avanzados-Personalizaci%C3%B3n" rel="noopener noreferrer" target="_blank">página API</a> del comando que estás ejecutando para confirmar qué campos son necesarios.</p>
</div>
<p>Algunas llamadas a la API requieren que especifiques un valor. Por ejemplo, si deseas agregar un registro DNS a un dominio usando <span class="code"><a href="https://help.dreamhost.com/hc/es/articles/217555707-Comandos-de-DNS-de-API#dns-add_record" rel="noopener noreferrer" target="_blank">dns-add_record</a></span>, debes especificar los siguientes valores:</p>
<ul>
<li>
<strong>record</strong>: <span class="code">&amp;record=</span> seguido por el nombre del dominio</li>
<li>
<strong>type</strong>: <span class="code">&amp;type=</span> seguido por el tipo de registro de DNS</li>
<li>
<strong>value</strong>: <span class="code">&amp;value=</span> seguido por el valor de DNS a agregar</li>
</ul>
<p>El siguiente ejemplo agregaría un registro TXT con el valor de <span class="code">test123</span> a <strong>example.com</strong>.</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/?key=1A2B3C4D5E6F7G8H<span class="code-highlight">&amp;cmd=dns-add_record&amp;record=example.com&amp;type=TXT&amp;value=test123</span></pre>
</div>
</div>
<div class="steps-section--step">
<img class="steps-number-icon" src="https://dreamhostknowledgebase.com/graphics/number-5.svg" width="50px">
<h2 id="h_01HF4QXQYSAMB02NW0X3GBT8YV">Paso 5 — Escoger un formato (opcional)</h2>
<p>Cuando haces una llamada a la API, la respuesta se devuelve en un formato específico. Puedes elegir en qué tipo de formato deseas que se devuelvan los datos agregando <span class="code">format=</span> seguido del formato. Los formatos válidos son:</p>
<ul>
<li>
<a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=tab">tab</a> (predeterminado)</li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=xml">xml</a></li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=json">json</a></li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=perl">perl</a></li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=php">php</a></li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=yaml">yaml</a></li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=html">HTML</a></li>
</ul>
<p>Lo siguiente devuelve la información en formato JSON:</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/?key=1A2B3C4D5E6F7G8H&amp;cmd=account-domain_usage<span class="code-highlight">&amp;format=json</span></pre>
</div>
</div>
<div class="steps-section--step">
<img class="steps-number-icon" src="https://dreamhostknowledgebase.com/graphics/number-6.svg" width="50px">
<h2 id="h_01HF4QXQYSCKGFSEPY10G53J8Q">Paso 6 — Agregar un ID único a la llamada (opcional)</h2>
<p>Puedes pasar un nuevo valor de ID único (longitud máxima: 64 caracteres) cuando envías una solicitud para asegurarte de no enviar accidentalmente el mismo comando dos veces. Esto es más útil al crear un script para ejecutar los comandos.</p>
<p>DreamHost recomienda usar <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUIDs</a> para este propósito, pero cualquier valor funcionará. El ID único que usas solo se aplica a su clave API específica, por lo que no necesitas preocuparte de que otros usuarios usen la misma identificación única.</p>
<div class="notebox-note">
<p>Solo consultas exitosas "usan" un <span class="code">unique_id</span>.</p>
</div>
<p>Para agregar un ID único, agrega <span class="code">&amp;unique_id=</span> seguido por el valor del ID. Por ejemplo, el valor del ID de <span class="code">123456</span> es usado en el siguiente ejemplo:</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/?key=1A2B3C4D5E6F7G8H&amp;cmd=dnslist_records&amp;format=json<span class="code-highlight">&amp;unique_id=123456</span></pre>
</div>
</div>
<div class="steps-section--step">
<img class="steps-number-icon" src="https://dreamhostknowledgebase.com/graphics/number-7.svg" width="50px">
<h2 id="h_01HF4QXQYSWR42ZBC4C88ED1FB">Paso 7 — Agrega un número de cuenta (opcional)</h2>
<p>También puedes agregar el número de cuenta con el que deseas realizar las operaciones. Puedes especificar esto agregando <span class="code">&amp;account=</span> seguido del número de cuenta de la página <a class="panel-link" href="https://panel.dreamhost.com/?tree=billing.account" rel="noopener noreferrer" target="_blank">Administrar Cuenta</a> Por ejemplo:</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/?key=1A2B3C4D5E6F7G8H&amp;cmd=account-domain_usage&amp;format=json<span class="code-highlight">&amp;account=123456</span></pre>
</div>
<div class="notebox-note">
<p>La cuenta se predetermina automáticamente a la tuya o a la primera cuenta a la que tienes acceso.</p>
</div>
</div>
</div>
</div>
</div>
<h2 class="header-section" id="h_01HF4QXQYSXZKT6PTQXXJ8EK9R">Conectar usando un script</h2>
<div class="solvvy-solution">
<p>El siguiente es un script Bash simple que imprime a todos los suscriptores a una Lista de Anuncios específica.</p>
<ul>
<li>Esto usa el comando <span class="code"><a href="https://help.dreamhost.com/hc/es/articles/217077998-Comandos-API-de-Listas-de-Anuncios#announcement_list-list_subscribers" rel="noopener noreferrer" target="_blank">announcement_list-list_subscribers</a></span>.</li>
<li>La variable <span class="code">LISTNAME</span> es la primera parte de la <span class="text-object">List Name</span> encontrada en la página <a class="panel-link" href="https://panel.dreamhost.com/?tree=mail.list" rel="noopener noreferrer" target="_blank">Lista de Anuncios</a> Si la <span class="text-object">List Name</span> fue <strong>testlist@example.com</strong>, esta variable puede ser <span class="code">testlist</span>.</li>
<li>El <span class="code">DOMAIN</span> es la URL en que la lista aparece. If La <span class="text-object">List Name</span> fue <strong>testlist@example.com</strong> esta variable puede ser <span class="code">example.com</span>.</li>
</ul>
<div class="preboxcontainer">
<pre class="prebox">#!/bin/bash

# variables
KEY=<span class="code-highlight">1A2B3C4D5E6F7G8H</span>
CMD=<span class="code-highlight">announcement_list-list_subscribers</span>
FORMAT=<span class="code-highlight">json</span>
LISTNAME=<span class="code-highlight">testlist</span>
DOMAIN=<span class="code-highlight">example.com</span>

# commands
LINK="https://api.dreamhost.com/?key=$KEY&amp;cmd=$CMD&amp;format=$FORMAT&amp;listname=$LISTNAME&amp;domain=$DOMAIN"
RESPONSE=`wget -O- -q "$LINK"  | python -m json.tool`

# print results
echo "$LINK"
echo "$RESPONSE"

if ! (echo $RESPONSE | grep -q 'success'); then
  exit 1
fi</pre>
</div>
</div>
<h2 id="h_01HY1G8CYS9XFGW7QE3STZNT7H">Ver también</h2>
<div class="solvvy-hidden">
<ul>
<li><a href="https://help.dreamhost.com/hc/es/articles/215413677-Generalidades-de-Privilegios-de-Cuenta">Generalidades de Privilegios de Cuenta</a></li>
<li><a href="https://help.dreamhost.com/hc/es/articles/217555707-Comandos-API-de-DNS">Comandos API de DNS</a></li>
<li><a href="https://help.dreamhost.com/hc/es/articles/217590537-Como-usar-API-S3-compatible-de-DreamObjects">Como usar API S3-compatible de DreamObjects</a></li>
</ul>
</div>
